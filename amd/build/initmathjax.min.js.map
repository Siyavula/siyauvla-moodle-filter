{"version":3,"file":"initmathjax.min.js","sources":["../src/initmathjax.js"],"sourcesContent":["define([\"jquery\", \"core/ajax\", \"core_filters/events\"], function ($, Ajax, FilterEvents) {\r\n\r\n    // Selectors and other strings defined here.\r\n    const SELECTORS = {\r\n        root: '.monassis',\r\n        mathEquation: '.latex-math',\r\n        questionContent: '.question-content',\r\n        classes: {\r\n            filterMathjax: 'filter_mathjaxloader_equation'\r\n        }\r\n    };\r\n\r\n    // Parent element of the questions.\r\n    const root = document.querySelector(SELECTORS.root);\r\n\r\n    const mathJaxFilterByEvents = function() {\r\n\r\n        /**\r\n         * Update the equations by mathjax filter.\r\n         */\r\n        function updateMathJax() {\r\n\r\n            if (root.querySelector(SELECTORS.questionContent) === null) {\r\n                return false;\r\n            }\r\n\r\n            // Initialise MathJax typesetting.\r\n            root.querySelector(SELECTORS.questionContent).classList.add(SELECTORS.classes.filterMathjax);\r\n            // Notifiy the siyavula filtered content are updated.\r\n            FilterEvents.notifyFilterContentUpdated(document.querySelectorAll(SELECTORS.root));\r\n\r\n            return true;\r\n\r\n        }\r\n\r\n        // Update the equations, if the content loaded before JS initiated.\r\n        var waitForMathJax = setInterval(function() {\r\n            try {\r\n                if (window.MathJax && updateMathJax()) {\r\n                    window.MathJax.Hub.Queue([\"Typeset\", window.MathJax.Hub]);\r\n                    clearInterval(waitForMathJax);\r\n                }\r\n            } catch (e) {\r\n                // MathJax has not yet been loaded.\r\n            }\r\n        }, 100);\r\n\r\n    };\r\n\r\n    return {\r\n\r\n        init: function () {\r\n            mathJaxFilterByEvents();\r\n        },\r\n    };\r\n});\r\n"],"names":["define","$","Ajax","FilterEvents","SELECTORS","filterMathjax","root","document","querySelector","mathJaxFilterByEvents","waitForMathJax","setInterval","window","MathJax","classList","add","notifyFilterContentUpdated","querySelectorAll","Hub","Queue","clearInterval","e","init"],"mappings":"AAAAA,qCAAO,CAAC,SAAU,YAAa,wBAAwB,SAAUC,EAAGC,KAAMC,oBAGhEC,eACI,YADJA,0BAGe,oBAHfA,kBAIO,CACLC,cAAe,iCAKjBC,KAAOC,SAASC,cAAcJ,gBAE9BK,sBAAwB,eAqBtBC,eAAiBC,aAAY,eAErBC,OAAOC,SAhBuC,OAAlDP,KAAKE,cAAcJ,6BAKvBE,KAAKE,cAAcJ,2BAA2BU,UAAUC,IAAIX,kBAAkBC,eAE9EF,aAAaa,2BAA2BT,SAASU,iBAAiBb,iBAE3D,KAQCQ,OAAOC,QAAQK,IAAIC,MAAM,CAAC,UAAWP,OAAOC,QAAQK,MACpDE,cAAcV,iBAEpB,MAAOW,OAGV,YAIA,CAEHC,KAAM,WACFb"}