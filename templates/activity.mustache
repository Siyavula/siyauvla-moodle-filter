{{!
    This file is part of Moodle - http://moodle.org/
    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.
    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.
    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template filter_siyavula/activity_renderable
    Template to render a Siyavula Activity.
    Context variables required for this template:
    * baseurl - The URL used to access Siyavula's API.
    * token - The client's token.
    * usertoken - The user's token.
    * activitytype - The type of activity to be rendered i.e. ['practice', 'standalone', 'assignment'].
    * assignmentid - The assignment activity's id. (Assignment only)
    * sectionid - The practice activity's section id. (Practice only)
    * templateid - The template's id. (Standalone only)
    * randomseed - The template's random seed. (Standalone only)
    * templatelist - The list of templates and random seeds (Standalone List only)
    Example context (json):
    {
        "baseurl": 'https://www.siyavula.com/',
        "token": "eyJpZCI6MTksIm5hbWUiOiJlYnciLCJjbGllbnRfaXAiOiIwLjAuMC4wIiwiZXhwI...",
        "usertoken": "eyJpZCI6MTksIm5hbWUiOiJlYnciLCJjbGllbnRfaXAiOiIwLjAuMC4wIiwiZXhwI...",
        "activitytype: : "practice",
        "assignmentid": 1,
        "sectionid" : 204,
        "templateid": 1220,
        "randomseed": 25486,
        "templatelist": [[4858], [2216, 339850], [2198], [4901, 339297], [4902]]
    }
}}
<link rel="stylesheet" href="{{ baseurl }}static/themes/emas/siyavula-api/siyavula-api.min.css" />
<link rel="stylesheet" href="{{ $CFG->wwwroot }}/filter/siyavula/styles/general.css" />
<script type="text/javascript">
    var baseUrl = '{{ baseurl }}';
    var token = '{{ token }}';
    var userToken = '{{ usertoken }}';
    var activityType = '{{ activitytype }}';
    {{#assignmentid}}
        var assignmentId = {{ assignmentid }};
    {{/assignmentid}}
    {{#sectionid}}
        var sectionId = {{ sectionid }};
    {{/sectionid}}
    {{#templateid}}
        var templateId = {{ templateid }};
    {{/templateid}}
    {{#randomseed}}
        var randomSeed = {{ randomseed }};
    {{/randomseed}}
    {{#templatelist}}
        var templateList = {{ templatelist }};
    {{/templatelist}}
</script>
<main class="sv-region-main emas sv">
    <!-- Only display mastery for practice activities. -->
    {{#sectionid}}
    <span class="emphasis-bold answer">Chapter Mastery (<span id="chapter-mastery-title"></span>):</span><br>
        <svg style="display:none;">
            <defs>
                <symbol id="mastery-stars">
                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z M0 0 h24 v24 h-24 v-24" fill="white" fill-rule="evenodd"/>
                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z M0 0 h24 v24 h-24 v-24" fill="white" fill-rule="evenodd" transform="translate(24)"/>
                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z M0 0 h24 v24 h-24 v-24" fill="white" fill-rule="evenodd" transform="translate(48)"/>
                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z M0 0 h24 v24 h-24 v-24" fill="white" fill-rule="evenodd" transform="translate(72)"/>
                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z M0 0 h24 v24 h-24 v-24" fill="white" fill-rule="evenodd"  transform="translate(96)"/>
                </symbol>
            </defs>
        </svg>
        <div class="mastery">
            <progress class="mastery-bg" id="chapter-mastery" value="0" max="100"></progress>
            <svg><use xlink:href="#mastery-stars"/></svg>
        </div>
    <br>
    <span class="emphasis-bold answer">Section Mastery (<span id="section-mastery-title"></span>):</span><br>
        <svg style="display:none;">
            <defs>
                <symbol id="mastery-stars">
                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z M0 0 h24 v24 h-24 v-24" fill="white" fill-rule="evenodd"/>
                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z M0 0 h24 v24 h-24 v-24" fill="white" fill-rule="evenodd" transform="translate(24)"/>
                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z M0 0 h24 v24 h-24 v-24" fill="white" fill-rule="evenodd" transform="translate(48)"/>
                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z M0 0 h24 v24 h-24 v-24" fill="white" fill-rule="evenodd" transform="translate(72)"/>
                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z M0 0 h24 v24 h-24 v-24" fill="white" fill-rule="evenodd"  transform="translate(96)"/>
                </symbol>
            </defs>
        </svg>
        <div class="mastery">
            <progress class="mastery-bg" id="section-mastery" value="0" max="100"></progress>
            <svg><use xlink:href="#mastery-stars"/></svg>
        </div>
    <br>
    {{/sectionid}}

    <div id="monassis" class="monassis monassis--practice monassis--maths monassis--siyavula-api">
        {{#templatelist}}
            <div class="step-counter" id="step-counter"><br></div>
        {{/templatelist}}
        <div class="question-wrapper">
            <div class="question-content"></div>
        </div>
    </div>
</main>

<script src="https://thor.siyavula.com/static/themes/emas/siyavula-api/siyavula-api.min.js"></script>
